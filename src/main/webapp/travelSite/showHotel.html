<!DOCTYPE html>
<html>
<head>
<title>Hotel</title>
<link href="/travelSite/asserts/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/travelSite/asserts/js/jquery.min.js"></script>
<!-- Custom Theme files -->
<!--theme-style-->
<link href="/travelSite/asserts/css/style.css" rel="stylesheet" type="text/css" media="all" />
<!--//theme-style-->
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta property="og:title" content="Vide" />
<meta name="keywords" content="" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!---->
<script src="/travelSite/asserts/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="/travelSite/asserts/css/font-awesome.min.css">
<!---->
<link rel="stylesheet" href="/travelSite/asserts/css/flexslider.css" type="text/css" media="screen" />
<link href='http://fonts.googleapis.com/css?family=Nunito:400,700,300' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,800italic,800,700italic,700,600italic,600,400italic,300italic,300' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="/travelSite/asserts/js/jquery.raty.min.js"></script>
	<style type="text/css">
		.iw_poi_title {color:#CC5522;font-size:14px;font-weight:bold;overflow:hidden;padding-right:13px;white-space:nowrap}
		.iw_poi_content {font:12px arial,sans-serif;overflow:visible;padding-top:4px;white-space:-moz-pre-wrap;word-wrap:break-word}
	</style>
	<script>
		$(document).ready(function(){
			$("#l0").addClass("active");
			$("#m0").addClass("active");
		});
	</script>
</head>
<body>
<div class="banner">
	</div>
    #include("/travelSite/commonPart/header.html")
		<!---header--->		
		<div class="content">
			<div class="hotel">
				<div class="container">
					<h2 class="tittle">Hotel</h2>
					<div class="rest-grids">
						<div class="col-md-8 rest-grid">
							<div class="rest-top">
								<h3>#(hotel.h_name)</h3>
								<div id="myCarousel" class="carousel slide">
									<!-- 轮播（Carousel）指标 -->
									<ol class="carousel-indicators">
										#set(x = 0)
										#for(image : hotelImages)
										<li data-target="#myCarousel" id='l#(x)' data-slide-to= '#(x)'></li>
										#set(x = x+1)
										#end
									</ol>
									<!-- 轮播（Carousel）项目 -->
									<div class="carousel-inner">
										#set(y = 0)
										#for(image : hotelImages)
										<div class="item" id='m#(y)'>
											<img src="/travelSite/asserts/images/#(image.h_image)" alt="">
										</div>
										#set(y = y+1)
										#end

									</div>
									<!-- 轮播（Carousel）导航 -->
									<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
										<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
										<span class="sr-only">Previous</span>
									</a>
									<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
										<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
										<span class="sr-only">Next</span>
									</a>
									<script>
										$("#myCarousel").carousel('cycle');
									</script>
								</div>
							</div>
							<div class="rest-top" style="padding-top: 30px;">
                                <div data-spy="scroll" data-target=".navbar" data-offset="0">
									<nav class="navbar">
										<div class="collapse navbar-collapse" id="myNavbar">
											<ul class="nav nav-tabs navbar-default" style="z-index: 10;">
												<li class="active">
													<a href="#introduction" class="nav-link">酒店简介</a>
												</li>
												<li>
													<a href="#map" class="nav-link">交通指南</a>
												</li>
												<li>
													<a href="#installation" class="nav-link">酒店设施</a>
												</li>
												<li>
													<a href="#policy" class="nav-link">酒店政策</a>
												</li>
												<li>
													<a href="#comment" class="nav-link">住客点评</a>
												</li>
											</ul>
										</div>
									</nav>
									<hr/>
								</div>
								<table class="table table-striped table-bordered table-hover table-condensed">
									<thead>
									<tr>
										<th>房型</th>
										<th>床型</th>
										<th>设施服务</th>
										<th>入住人数</th>
										<th>政策</th>
										<th>房价（含服务费）</th>
									</tr>
									</thead>
									<tbody>
									<tr>
										<td>经济单人间</td>
										<td>大床</td>
										<td>禁烟</td>
										<td>1 人</td>
										<td>不可取消</td>
										<td>#(hotel.h_price) 元/晚&nbsp;&nbsp;
											<button type="button" href="#reservation" class="btn btn-info ">预订</button>
										</td>
									</tr>
									<tr>
										<td>标准间</td>
										<td>双床</td>
										<td>禁烟</td>
										<td>2 人</td>
										<td>不可取消</td>
										<td>#(hotel.h_price+100) 元/晚&nbsp;&nbsp;
											<button type="button" href="#reservation" class="btn btn-info ">预订</button>
										</td>
									</tr>
									<tr>
										<td>商务大床房</td>
										<td>大床</td>
										<td>禁烟</td>
										<td>2 人</td>
										<td>不可取消</td>
										<td>#(hotel.h_price+150) 元/晚&nbsp;&nbsp;
											<button type="button" href="#reservation" class="btn btn-info ">预订</button>
										</td>
									</tr>
									</tbody>
								</table>
							</div>
							<div id="introduction">
								<h3>酒店介绍</h3>
								<p>联系方式：#(hotel.h_phone)</p>&nbsp;&nbsp;
								<p class="text-info" >&nbsp;&nbsp;&nbsp;&nbsp;#(hotel.h_introduction)</p>
							</div>
							<div id="map">
								<h3 style="padding-top: 20px">交通指南</h3>
								<div style="width:697px;height:418px;border:#ccc solid 1px;" id="dituContent"></div>
							</div>
							<div id="installation">
								<h3 style="padding-top: 20px">酒店设施</h3>
								<div>
									<div style="padding-top: 30px">网络
										<span class="glyphicon glyphicon-signal" style="margin-left: 100px"></span>&nbsp;&nbsp;客房WIFI免费
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 100px"></span>&nbsp;&nbsp;房间内高速上网
										<span class="glyphicon glyphicon-signal" style="margin-left: 100px"></span>&nbsp;&nbsp;公共区WIFI免费
									</div><hr/>
									<div>交通设施
										<span class="glyphicon glyphicon-remove" style="margin-left: 70px"></span>&nbsp;&nbsp;收费停车场<mark style="margin-left: 20px;font-size: smaller">收费，收费标准以酒店告知为准。</mark>
									</div><hr/>
									<div>前台服务
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 70px"></span>&nbsp;&nbsp;部分时段大堂经理
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 70px"></span>&nbsp;&nbsp;叫醒服务
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 150px"></span>&nbsp;&nbsp;邮政服务
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 130px; line-height: 40px"></span>&nbsp;&nbsp;前台保险柜
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 110px"></span>&nbsp;&nbsp;信用卡结算
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 138px"></span>&nbsp;&nbsp;一次性账单结算
									</div><hr/>
									<div>通用设施
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 70px"></span>&nbsp;&nbsp;电梯
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 155px"></span>&nbsp;&nbsp;非经营性休息区
										<span class="glyphicon glyphicon-remove-sign" style="margin-left: 110px"></span>&nbsp;&nbsp;无烟楼层
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 130px; line-height: 40px"></span>&nbsp;&nbsp;所有场所严禁吸烟
										<span class="glyphicon glyphicon-ok-sign" style="margin-left: 70px"></span>&nbsp;&nbsp;公用区监控系统
									</div><hr/>
								</div>
							</div>
							<div id="policy">
								<h3 style="padding-top: 20px">酒店政策</h3>
								<div>
									<div style="padding-top: 30px">入住和酒店
										<small style="margin-left: 70px;"><span style="padding-right: 20px">入住时间：14:00以后</span>离店时间：12:00以前</small>
									</div><hr/>
									<div>儿童政策
										<small style="padding-left: 70px">•酒店允许携带儿童入住</small><br/>
										<small style="padding-left: 130px">•不接受18岁以下客人在无监护人陪同的情况下入住</small><br/>
										<div style="margin-left: 130px"><small>•加床及儿童政策取决于您所选的房型，若超过房型限定人数，或携带儿童年龄不在政策描述范围内，可能需收取额外费用，提出的任何要求均需获得酒店的确认。</small></div>
									</div><hr/>
									<div>宠物
										<small style="padding-left: 100px">不可携带宠物</small>
									</div><hr/>
								</div>
							</div>
							<div id="comment">
								<h3 style="padding-top: 20px">住客点评</h3>
								<div id="star" data-score="#(hotel.h_score)"></div>
								<script>
									$.fn.raty.defaults.path = '/travelSite/asserts/images';
									$('#star').raty({
										score: function() {
											return $(this).attr('data-score');
										}
									});
								</script>
								<span>点评均来自真实入住客人！</span>
								<form method="post" action="#" class="form-inline" onsubmit="return Judge()">
									<div class="form-group">
										<input type="hidden" name="u_id" value="#(session.currentUser.u_id)"/>
										<input type="hidden" name="h_id" value="#(hotel.h_id)"/>
										<textarea type="text" class="form-control" name="h_comment" placeholder="留下你的精彩评论吧" style="width: 500px; height: 60px;margin-right: 50px"></textarea>
										<button class="btn btn-info btn-success" type="submit">提交</button>
									</div>
								</form>
								<script>
									function Judge() {
									#if(session.currentUser == null)
										window.location.href="/login/stepToLogin";
										return false;
									#else
										alert("评论成功");
										return true
									#end
									}
								</script>
							</div>
							<div>

							</div>

						</div>
						<div class="col-md-4 rest-grid1">
							<h3 id="reservation">预订房间</h3>
							<form action="/reserve/reserveHotel" method="post" name="reservation" onsubmit="return Judgement()">
							<div class="reser-grid1">
								<h5>入住日期</h5>
								<div class="book_date1">
									<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
									<input type="date" name="r_getInTime" id="r_getInTime" placeholder="请选择日期" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '请选择日期';}" required="">
								</div>
								<h5>退房日期</h5>
								<div class="book_date1">
									<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
									<input type="date" name="r_getOutTime" id="r_getOutTime" placeholder="请选择日期" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = '请选择日期';}" required="">
								</div>
								<h5>成年人人数:</h5>
								<div class="best-hot1">
									<input type="text" name="r_number_1" placeholder="请输入人数"  onfocus="this.value = '';" required="">
								</div>
								<h5>未成年人数:</h5>
								<div class="best-hot1">
									<input type="text" name="r_number_2" placeholder="请输入人数" onfocus="this.value = '';" required="">
								</div>
								<h5>房型:</h5>
								<select class="sel1" required="">
									<option value="" disabled>请选择</option>
									<option value="">经济单人间</option>
									<option value="">标准间</option>
									<option value="">商务大床房</option>
								</select>
								#if(session.currentUser != null)
								<input type="hidden" name="u_id" value='#(session.currentUser.u_id)' />
								#end
								<input type="hidden" name="h_id" value='#(hotel.h_id)' />
								<div class="best-hot">
									<input type="submit" value="提交预订">
								</div>
							</div>
							</form>
						</div>
						<div class="col-md-4 rest-grid1">
						</div>
						<div class="clearfix"></div>
					</div>
				</div>
			</div>
		</div>
		<!--footer-->
	#include("/travelSite/commonPart/footer.ftl")
	<!--footer-->
</body>
</html>
<script type="text/javascript" src="http://api.map.baidu.com/api?key=&v=1.1&services=true"></script>
<script>
	function Judgement() {
		var startTime = $("#r_getInTime").val();
		var start = new Date(startTime.replace("-", "/").replace("-", "/"));
		var endTime = $("#r_getOutTime").val();
		var end = new Date(endTime.replace("-", "/").replace("-", "/"));
		#if(session.currentUser == null)
			window.location.href="/login/stepToLogin";
			return false;
		#end
		//比较时需要将对象进行转换
		if (start < new Date()||start.getTime() == new Date().getTime()){
			alert("订房时间错误");
			return false;
		}
		if (end < start||end.getTime() == start.getTime()) {
			alert("退房时间必须晚于订房时间！");
			return false;
		}
		else{
			alert('预订成功');
			return true;
		}
	}
</script>
<script type="text/javascript">
	//创建和初始化地图函数：
	function initMap(){
		createMap();//创建地图
		setMapEvent();//设置地图事件
		addMapControl();//向地图添加控件
		addMarker();//向地图中添加marker
	}

	//创建地图函数：
	function createMap(){
		var map = new BMap.Map("dituContent");//在百度地图容器中创建一个地图
		//var point = new BMap.Point(116.396832,39.999271);//定义一个中心点坐标
		var point = new BMap.Point('#(hotel.h_longitude)','#(hotel.h_latitude)');//定义一个中心点坐标
		map.centerAndZoom(point,15);//设定地图的中心点和坐标并将地图显示在地图容器中
		window.map = map;//将map变量存储在全局
	}

	//地图事件设置函数：
	function setMapEvent(){
		map.enableDragging();//启用地图拖拽事件，默认启用(可不写)
		map.enableScrollWheelZoom();//启用地图滚轮放大缩小
		map.enableDoubleClickZoom();//启用鼠标双击放大，默认启用(可不写)
		map.enableKeyboard();//启用键盘上下左右键移动地图
	}

	//地图控件添加函数：
	function addMapControl(){
		//向地图中添加缩放控件
		var ctrl_nav = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});
		map.addControl(ctrl_nav);
		//向地图中添加缩略图控件
		var ctrl_ove = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});
		map.addControl(ctrl_ove);
		//向地图中添加比例尺控件
		var ctrl_sca = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});
		map.addControl(ctrl_sca);
	}

	//标注点数组
	var markerArr = [{title:'#(hotel.h_name)',content:'#(hotel.h_location)',point:"#(hotel.h_longitude)|#(hotel.h_latitude)",isOpen:1,icon:{w:21,h:21,l:0,t:0,x:6,lb:5}}
	];
	//创建marker
	function addMarker(){
		for(var i=0;i<markerArr.length;i++){
			var json = markerArr[i];
			var p0 = json.point.split("|")[0];
			var p1 = json.point.split("|")[1];
			var point = new BMap.Point(p0,p1);
			var iconImg = createIcon(json.icon);
			var marker = new BMap.Marker(point,{icon:iconImg});
			var iw = createInfoWindow(i);
			var label = new BMap.Label(json.title,{"offset":new BMap.Size(json.icon.lb-json.icon.x+10,-20)});
			marker.setLabel(label);
			map.addOverlay(marker);
			label.setStyle({
				borderColor:"#808080",
				color:"#333",
				cursor:"pointer"
			});

			(function(){
				var index = i;
				var _iw = createInfoWindow(i);
				var _marker = marker;
				_marker.addEventListener("click",function(){
					this.openInfoWindow(_iw);
				});
				_iw.addEventListener("open",function(){
					_marker.getLabel().hide();
				})
				_iw.addEventListener("close",function(){
					_marker.getLabel().show();
				})
				label.addEventListener("click",function(){
					_marker.openInfoWindow(_iw);
				})
				if(!!json.isOpen){
					label.hide();
					_marker.openInfoWindow(_iw);
				}
			})()
		}
	}
	//创建InfoWindow
	function createInfoWindow(i){
		var json = markerArr[i];
		var iw = new BMap.InfoWindow("<b class='iw_poi_title' title='" + json.title + "'>" + json.title + "</b><div class='iw_poi_content'>"+json.content+"</div>");
		return iw;
	}
	//创建一个Icon
	function createIcon(json){
		var icon = new BMap.Icon("http://app.baidu.com/map/images/us_mk_icon.png", new BMap.Size(json.w,json.h),{imageOffset: new BMap.Size(-json.l,-json.t),infoWindowOffset:new BMap.Size(json.lb+5,1),offset:new BMap.Size(json.x,json.h)})
		return icon;
	}

	initMap();//创建和初始化地图
</script>
