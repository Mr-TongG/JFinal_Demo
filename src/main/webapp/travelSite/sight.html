<!DOCTYPE html>
<html>
<head>
	<title>Sight</title>
	<link href="/travelSite/asserts/css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="/travelSite/asserts/js/jquery.min.js"></script>
	<!-- Custom Theme files -->
	<!--theme-style-->
	<link href="/travelSite/asserts/css/style.css" rel="stylesheet" type="text/css" media="all" />
	<link href="/travelSite/asserts/css/mystyle.css" rel="stylesheet" type="text/css" media="all" />
	<!--//theme-style-->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta property="og:title" content="Vide" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords" content="" />
	<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
	<!---->
	<script src="/travelSite/asserts/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="/travelSite/asserts/css/font-awesome.min.css">
	<!---->
	<link rel="stylesheet" href="/travelSite/asserts/css/flexslider.css" type="text/css" media="screen" />
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,700,300' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,800italic,800,700italic,700,600italic,600,400italic,300italic,300' rel='stylesheet' type='text/css'>
	<!---strat-date-piker---->
</head>
<body>
<div class="banner">

</div>
#include ("/travelSite/commonPart/header.html")
<!---header--->
<div class="content">
	<div class="page">
		<div class="container">
			<div class="short-heading">
				<h2 class="tittle" style="align:left">#(sight.s_name)</h2>
			</div>

			<div style="position:relative;margin-top:10px;margin-bottom:20px;padding:20px;height:370px;    border: 1px solid #dfdfdf;background-color:#fff;">
				<div class="brief-left">
					#sight(sight.s_id)
				</div>
				<div class="brief-right">
					<h2>#(sight.s_name)</h2>
					<span class="spot-grade">
				<strong>AAAAA</strong>景区
				</span>
					<ul>
						<li data-reactid="43">
							<em data-reactid="44">景点地址</em>
							<span data-reactid="45">#(sight.s_location)</span>
							<a class="map-icon" href="#map" data-reactid="46">
								<i data-reactid="47"></i>
								<!-- react-text: 48 -->
								查看地图
								<!-- /react-text -->
							</a>
						</li>
						<li class="time timeLong" data-reactid="49">
							<em data-reactid="50">开放时间</em>
							<span data-reactid="51" class="" >#(sight.s_openTime)-#(sight.s_closeTime)</span>
						</li>
						<li class="promise">
							<em>服务承诺</em>
							<div class="show-promise-detail">
								<span>如实描述</span>
								<span>低价保障</span>
								<span>入园保障</span>
								<span>特殊退订保障</span>
							</div>
						</li>
					</ul>
					<div class="score">
					<span>
						<span class="score-star">
						<i style="width:96%;">
						</i>
						</span>
						<i class="num">#(sight.s_score)</i>
						<span class="total">/5分</span>
					</span>
						<a href="#comments">查看78066条点评</a>
					</div>
					<div class="last-comment ">
						<div class="comment">
							<div class="clearfix content">
								<span class="word">很壮观，值得一看，毕竟是明清时候的辉煌历史！！</span>
								<i class="empty"></i><span class="more">
					<i>......</i><!-- react-text: 2806 -->详细<!-- /react-text -->
					</span>
							</div>
							<span class="from"><i></i><!-- react-text: 2809 -->xiaocw5135<!-- /react-text --></span>
						</div>
						<i class="close-popup" style="top: 0px;">+</i>
					</div>
				</div>


				<div class="clearfix"></div>
			</div>

			<div class="clearfix" data-reactid="1779">
				<div class="detail-left" data-reactid="1780">
					<div class="nav-tab-wrapper" data-reactid="1781">
						<div class="nav-tab-wrapper nav-tab-stick" data-reactid="1782">
							<ul data-reactid="1783">
								<li class="" data-reactid="1786"><span data-reactid="1787"><a href="#introduce">景点简介</a></span></li>
								<li class="" data-reactid="1788"><span data-reactid="1789"><a href="#map">景点简介</a></span></li>
								<li class="" data-reactid="1790"><span data-reactid="1791"><a href="#comments">用户点评</a></span></li>
							</ul>
						</div>
					</div>
					<div class="content-wrapper" data-reactid="1815" id="introduce">
						<div class="label introduce-label" data-reactid="1816">景点简介</div>
						<ul class="introduce-feature" data-reactid="1817">
							<li data-reactid="1818"><span class="icon" data-reactid="1819">特色1</span><span
									data-reactid="1820">早起看一场庄严肃穆的升旗仪式
</span></li>
							<li data-reactid="1821"><span class="icon" data-reactid="1822">特色2</span><span
									data-reactid="1823">天安门广场是北京市的中心，更是共和国的标志。
</span></li>
							<li data-reactid="1824"><span class="icon" data-reactid="1825">特色3</span><span
									data-reactid="1826">经历了多次大阅兵，见证了中华民族的崛起和振兴。
</span></li>
						</ul>
						<div class="introduce-content" data-reactid="1827">
							<p>#(sight.s_introduction)</p>

						</div>
					</div >
					<div class="content-wrapper" data-reactid="1828" id="map">
						<div class="label traffic-guide-label" data-reactid="1829">交通指南</div>
						<div><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
							<html xmlns="http://www.w3.org/1999/xhtml">
							<head>
								<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
								<meta name="keywords" content="百度地图,百度地图API，百度地图自定义工具，百度地图所见即所得工具" />
								<meta name="description" content="百度地图API自定义地图，帮助用户在可视化操作下生成百度地图" />
								<title>百度地图API自定义地图</title>
								<!--引用百度地图API-->
								<style type="text/css">
									html,body{margin:0;padding:0;}
									.iw_poi_title {color:#CC5522;font-size:14px;font-weight:bold;overflow:hidden;padding-right:13px;white-space:nowrap}
									.iw_poi_content {font:12px arial,sans-serif;overflow:visible;padding-top:4px;white-space:-moz-pre-wrap;word-wrap:break-word}
								</style>
								<script type="text/javascript" src="http://api.map.baidu.com/api?key=&v=1.1&services=true"></script>
							</head>

							<body>
							<!--百度地图容器-->
							<div style="width:697px;height:418px;border:#ccc solid 1px;" id="dituContent"></div>
							</body>
							<script type="text/javascript">
								//创建和初始化地图函数：
								function initMap(){
									createMap();//创建地图
									setMapEvent();//设置地图事件
									addMapControl();//向地图添加控件
									addMarker();//向地图中添加marker
								}

								//创建地图函数：
								function createMap(){
									var map = new BMap.Map("dituContent");//在百度地图容器中创建一个地图
									//var point = new BMap.Point(116.396832,39.999271);//定义一个中心点坐标
									var point = new BMap.Point('#(sight.s_longitude)','#(sight.s_latitude)');//定义一个中心点坐标
									map.centerAndZoom(point,15);//设定地图的中心点和坐标并将地图显示在地图容器中
									window.map = map;//将map变量存储在全局
								}

								//地图事件设置函数：
								function setMapEvent(){
									map.enableDragging();//启用地图拖拽事件，默认启用(可不写)
									map.enableScrollWheelZoom();//启用地图滚轮放大缩小
									map.enableDoubleClickZoom();//启用鼠标双击放大，默认启用(可不写)
									map.enableKeyboard();//启用键盘上下左右键移动地图
								}

								//地图控件添加函数：
								function addMapControl(){
									//向地图中添加缩放控件
									var ctrl_nav = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});
									map.addControl(ctrl_nav);
									//向地图中添加缩略图控件
									var ctrl_ove = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});
									map.addControl(ctrl_ove);
									//向地图中添加比例尺控件
									var ctrl_sca = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});
									map.addControl(ctrl_sca);
								}

								//标注点数组
								var markerArr = [{title:'#(sight.s_name)',content:'#(sight.s_location)',point:"#(sight.s_longitude)|#(sight.s_latitude)",isOpen:1,icon:{w:21,h:21,l:0,t:0,x:6,lb:5}}
								];
								//创建marker
								function addMarker(){
									for(var i=0;i<markerArr.length;i++){
										var json = markerArr[i];
										var p0 = json.point.split("|")[0];
										var p1 = json.point.split("|")[1];
										var point = new BMap.Point(p0,p1);
										var iconImg = createIcon(json.icon);
										var marker = new BMap.Marker(point,{icon:iconImg});
										var iw = createInfoWindow(i);
										var label = new BMap.Label(json.title,{"offset":new BMap.Size(json.icon.lb-json.icon.x+10,-20)});
										marker.setLabel(label);
										map.addOverlay(marker);
										label.setStyle({
											borderColor:"#808080",
											color:"#333",
											cursor:"pointer"
										});

										(function(){
											var index = i;
											var _iw = createInfoWindow(i);
											var _marker = marker;
											_marker.addEventListener("click",function(){
												this.openInfoWindow(_iw);
											});
											_iw.addEventListener("open",function(){
												_marker.getLabel().hide();
											})
											_iw.addEventListener("close",function(){
												_marker.getLabel().show();
											})
											label.addEventListener("click",function(){
												_marker.openInfoWindow(_iw);
											})
											if(!!json.isOpen){
												label.hide();
												_marker.openInfoWindow(_iw);
											}
										})()
									}
								}
								//创建InfoWindow
								function createInfoWindow(i){
									var json = markerArr[i];
									var iw = new BMap.InfoWindow("<b class='iw_poi_title' title='" + json.title + "'>" + json.title + "</b><div class='iw_poi_content'>"+json.content+"</div>");
									return iw;
								}
								//创建一个Icon
								function createIcon(json){
									var icon = new BMap.Icon("http://app.baidu.com/map/images/us_mk_icon.png", new BMap.Size(json.w,json.h),{imageOffset: new BMap.Size(-json.l,-json.t),infoWindowOffset:new BMap.Size(json.lb+5,1),offset:new BMap.Size(json.x,json.h)})
									return icon;
								}

								initMap();//创建和初始化地图
							</script>
							</html></div>
					</div>
					<div class="content-wrapper clearfix" id="comments">
						<div class="label user-reviews-label">用户点评</div><br/>
						<div id="comment"></div>
						<script>
							$(document).ready(function(){
								$.ajax({     //将action包含的参数放进来
									url : "/comment/getSightComment/#(sight.s_id)",
									type : "GET",   //规定请求的类型（GET 或 POST）
									cache : false,  //表示浏览器是否缓存被请求页面
									dataType : "html",  //预期的服务器响应的数据类型
									success : function(data){
										$("#comment").html(data)
									}
								})
							});
						</script>
						<form method="post" action="/comment/insertSightComment">
							<input type="hidden" name="s_id" value="#(sight.s_id)" />
							#if(session.currentUser != null)
							<input type="hidden" name="u_id" value="#(session.currentUser.u_id)" />
							<textarea style="height: 100px;width: 1048px;resize: none;" name="s_comment"></textarea>
							<button type="submit" style="float:right" >发布</button>
							#else
							<h3 class="tittle" style="text-align: center">登陆后可发表评论哦！</h3>
							#end

						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!--footer-->
#include("/travelSite/commonPart/footer.ftl")
<!--footer-->
</body>
</html>
